/*! kkb-frontend-restful-service-framework 2015-07-13 */
!function(a){var b=a.kkb||{};b.restful=b.restful||{},b.restful.courses={},b.restful.classes={},b.restful.categories={},b.models=b.models||{},b.models.courseModels=b.models.courseModels||{},a.kkb=b}(window),kkb.models.common=kkb.models.common||{},kkb.models.common.Profile=function(a,b,c,d,e,f){var a=a||null,b=b||null,c=c||null,d=d||null,g=e||null,a=f||null;this.getTenantId=function(){return a},this.getUserName=function(){return b},this.getLoginName=function(){return c},this.getWebApiUrl=function(){return d},this.getAccessToken=function(){return g},this.getTenantId=function(){return a}},kkb.models.base=function(a){var b=a;this.getModelName=function(){return b||"kkb.models.base"}},kkb.models.common=kkb.models.common||{},kkb.models.courseModels.EvaluationModel=function(a,b,c,d,e,f){this["super"].constructor.call(this,"kkb.models.courseModels.EvaluationModel"),isNaN(parseInt(b||0))&&(b=0),this.content=a||"",this.rating=parseInt(b||0),this.status=c||"active",this.courseId=d||null,this.evaluationId=e||null,this.useful=!!f,this.useless=!f,this.isNewComment=function(){return!this.evaluationId},this.getPostCommentObject=function(){return{content:this.content,rating:this.rating,status:this.status}},this.getCommentReplyObject=function(){return{content:this.content,status:"active"}},this.getUsefulReplyObject=function(){return{useful:1}},this.getUselessReplyObject=function(){return{useless:1}},this.getCourseId=function(){return this.courseId},this.getCommentId=function(){return this.evaluationId}},extend(kkb.models.base,kkb.models.courseModels.EvaluationModel),kkb.restful.RESTfulBase=function(a,b,c){var d=null;this.serviceName=a;var e=function(){return b},f=function(){return"http://release-api.kaikeba.cn"};this.resloveUrl=function(a){return this.getWebApiUrl()+a},this.getResource=function(a,b){var c=e()(this.resloveUrl(a),b,{get:{method:"GET"},update:{method:"PUT"},create:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"}});return c.getUrl=function(){return a},c.getParameter=function(){return b},c};var g=function(){return d||(d=new kkb.models.common.Profile("","","",f(),"9f6cb6ef7d83d59ddc550e6d1b5c49b6",8)),d};this.getWebApiUrl=function(){return g().getWebApiUrl()},this.getAccessToken=function(){return g().getAccessToken()},this.getTenantId=function(){return g().getTenantId()}},kkb.restful.RESTfulBase.prototype.getServiceName=function(){return this.serviceName},kkb.restful.RESTfulBase.prototype.getSO=function(){var a=this,b=function(a){return delete a["super"],a},c=function(b){return a.getResource(b.getUrl()+"?access_token="+a.getAccessToken(),b.getParameter())};return{get:function(a,d){return c(a).get(b(d)).$promise},update:function(a,d){return c(a).update(b(d)).$promise},create:function(a,d){return c(a).save(b(d)).$promise},query:function(a,d){return c(a).query(b(d)).$promise},remove:function(a,d){return c(a).remove(b(d)).$promise}}},kkb.restful.courses.CommentService=function(a,b){var c=this;this["super"].constructor.call(this,"CommentService",a,b);var d=function(a,b){return c.getResource("/courses/:courseId/evaluations/:evaluationId/",{courseId:a||"@courseId",evaluationId:b||"@evaluationId"})},e=function(a){return c.getResource("/evaluations/:evaluationId/",{evaluationId:a||"@evaluationId"})};this.get=function(a){},this.update=function(a){return this.getSO().update(e(a.getCommentId()),a.getPostCommentObject())},this.remove=function(a){},this.create=function(a){return this.getSO().create(d(a.getCourseId()),a.getPostCommentObject())},this.query=function(a){return this.getSO().get(d(),{courseId:a,pageSize:1e4})},this.upComment=function(a){return this.getSO().update(e(a.getCommentId()),a.getUsefulReplyObject())},this.downComment=function(a){return this.getSO().update(e(a.getCommentId()),a.getUselessReplyObject())}},extend(kkb.restful.RESTfulBase,kkb.restful.courses.CommentService),kkb.restful.courses.CommentReplyService=function(a,b){var c=this;this["super"].constructor.call(this,"CommentReplyService",a,b);var d=function(a){return c.getResource("/evaluations/:evaluationId/comments",{evaluationId:a||"@evaluationId"})};this.get=function(a){},this.update=function(a){return this.getSO().update(getEditCommentResource(a.getCommentId()),a.getPostCommentObject())},this.remove=function(a){},this.create=function(a){return this.getSO().create(d(a.getCommentId()),a.getCommentReplyObject())},this.query=function(a){return this.getSO().get(getClassCommentResource(),{courseId:a})}},extend(kkb.restful.RESTfulBase,kkb.restful.courses.CommentReplyService),kkb.restful.classes.main=function(){this.queryClasses=function(){},this.getClasses=function(a){}},kkb.restful.categories.CategoryService=function(a,b){var c=this;this["super"].constructor.call(this,"CategoryService",a,b);var d=function(a){return c.getResource("/categories/:categoryId/",{categoryId:a||"@categoryId"})};this.get=function(a){return this.getSO().get(d(a),{})},this.update=function(a){},this.remove=function(a){},this.create=function(a){},this.query=function(a){}},extend(kkb.restful.RESTfulBase,kkb.restful.categories.CategoryService);